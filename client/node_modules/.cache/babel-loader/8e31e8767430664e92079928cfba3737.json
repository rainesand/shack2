{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = useKeyboardNavigation;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = require(\"react\");\n\nvar _constants = require(\"../../../../libs/constants\");\n\nvar _getNewIndex = _interopRequireDefault(require(\"../helpers/getNewIndex\"));\n\nvar _isOptionVisible = _interopRequireDefault(require(\"../../../InternalDropdown/helpers/isOptionVisible\"));\n\nfunction useKeyboardNavigation(country, list, ref, scrollableRef, itemsRef, handleCountryChange, setFocusIndex) {\n  var activeIndex = (0, _react.useRef)(0);\n  var length = list.length;\n  var handleActiveChange = (0, _react.useCallback)(function (newIndex) {\n    var currentItem = itemsRef.current[activeIndex.current];\n    var newItem = itemsRef.current[newIndex];\n\n    if (currentItem) {\n      currentItem.setAttribute('aria-selected', false);\n    }\n\n    if (newItem) {\n      itemsRef.current[newIndex].setAttribute('aria-selected', true);\n      activeIndex.current = newIndex;\n    }\n  }, [itemsRef]);\n  var moveToOption = (0, _react.useCallback)(function (newIndex) {\n    var currentItem = itemsRef.current[activeIndex.current];\n    var newItem = itemsRef.current[newIndex];\n\n    if (currentItem && newItem) {\n      if (!(0, _isOptionVisible[\"default\"])(newItem, scrollableRef.current)) {\n        var amount = newItem.offsetTop - currentItem.offsetTop;\n        scrollableRef.current.scrollBy(0, amount);\n      }\n\n      handleActiveChange(newIndex);\n    }\n  }, [handleActiveChange, itemsRef, scrollableRef]);\n  var handleKeyDown = (0, _react.useCallback)(function (event) {\n    if ([_constants.UP_KEY, _constants.DOWN_KEY, _constants.ENTER_KEY, _constants.HOME_KEY, _constants.END_KEY, _constants.ESCAPE_KEY, _constants.TAB_KEY].indexOf(event.keyCode) !== -1) {\n      var _keyHandlerMap;\n\n      event.preventDefault();\n      var active = activeIndex.current;\n      var keyHandlerMap = (_keyHandlerMap = {}, (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.UP_KEY, function () {\n        return moveToOption((0, _getNewIndex[\"default\"])(active - 1, length));\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.DOWN_KEY, function () {\n        return moveToOption((0, _getNewIndex[\"default\"])(active + 1, length));\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.HOME_KEY, function () {\n        return moveToOption(0);\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.END_KEY, function () {\n        return moveToOption(length - 1);\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.ENTER_KEY, function () {\n        return list[active] && handleCountryChange(list[active]);\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.ESCAPE_KEY, function () {\n        return setFocusIndex(0);\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.TAB_KEY, function () {\n        return setFocusIndex(2);\n      }), _keyHandlerMap);\n      keyHandlerMap[event.keyCode]();\n    }\n  }, [handleCountryChange, length, list, moveToOption, setFocusIndex]);\n  (0, _react.useEffect)(function () {\n    var element = ref.current || window;\n    element.addEventListener('keydown', handleKeyDown);\n    return function () {\n      element.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleKeyDown, ref]);\n  (0, _react.useEffect)(function () {\n    handleActiveChange(0);\n\n    if (scrollableRef.current && scrollableRef.current.scrollTo) {\n      scrollableRef.current.scrollTo(0, 0);\n    }\n\n    activeIndex.current = 0;\n  }, [country, handleActiveChange, itemsRef, length, scrollableRef]);\n  (0, _react.useEffect)(function () {\n    var currentItem = itemsRef.current[activeIndex.current];\n\n    if (currentItem) {\n      currentItem.setAttribute('aria-selected', true);\n    }\n  });\n  return handleActiveChange;\n}","map":{"version":3,"sources":["/Users/Saul/Desktop/shack2/node_modules/react-rainbow-components/components/PhoneInput/countriesDropdown/hooks/useKeyboardNavigation.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","useKeyboardNavigation","_defineProperty2","_react","_constants","_getNewIndex","_isOptionVisible","country","list","ref","scrollableRef","itemsRef","handleCountryChange","setFocusIndex","activeIndex","useRef","length","handleActiveChange","useCallback","newIndex","currentItem","current","newItem","setAttribute","moveToOption","amount","offsetTop","scrollBy","handleKeyDown","event","UP_KEY","DOWN_KEY","ENTER_KEY","HOME_KEY","END_KEY","ESCAPE_KEY","TAB_KEY","indexOf","keyCode","_keyHandlerMap","preventDefault","active","keyHandlerMap","useEffect","element","window","addEventListener","removeEventListener","scrollTo"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = useKeyboardNavigation;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = require(\"react\");\n\nvar _constants = require(\"../../../../libs/constants\");\n\nvar _getNewIndex = _interopRequireDefault(require(\"../helpers/getNewIndex\"));\n\nvar _isOptionVisible = _interopRequireDefault(require(\"../../../InternalDropdown/helpers/isOptionVisible\"));\n\nfunction useKeyboardNavigation(country, list, ref, scrollableRef, itemsRef, handleCountryChange, setFocusIndex) {\n  var activeIndex = (0, _react.useRef)(0);\n  var length = list.length;\n  var handleActiveChange = (0, _react.useCallback)(function (newIndex) {\n    var currentItem = itemsRef.current[activeIndex.current];\n    var newItem = itemsRef.current[newIndex];\n\n    if (currentItem) {\n      currentItem.setAttribute('aria-selected', false);\n    }\n\n    if (newItem) {\n      itemsRef.current[newIndex].setAttribute('aria-selected', true);\n      activeIndex.current = newIndex;\n    }\n  }, [itemsRef]);\n  var moveToOption = (0, _react.useCallback)(function (newIndex) {\n    var currentItem = itemsRef.current[activeIndex.current];\n    var newItem = itemsRef.current[newIndex];\n\n    if (currentItem && newItem) {\n      if (!(0, _isOptionVisible[\"default\"])(newItem, scrollableRef.current)) {\n        var amount = newItem.offsetTop - currentItem.offsetTop;\n        scrollableRef.current.scrollBy(0, amount);\n      }\n\n      handleActiveChange(newIndex);\n    }\n  }, [handleActiveChange, itemsRef, scrollableRef]);\n  var handleKeyDown = (0, _react.useCallback)(function (event) {\n    if ([_constants.UP_KEY, _constants.DOWN_KEY, _constants.ENTER_KEY, _constants.HOME_KEY, _constants.END_KEY, _constants.ESCAPE_KEY, _constants.TAB_KEY].indexOf(event.keyCode) !== -1) {\n      var _keyHandlerMap;\n\n      event.preventDefault();\n      var active = activeIndex.current;\n      var keyHandlerMap = (_keyHandlerMap = {}, (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.UP_KEY, function () {\n        return moveToOption((0, _getNewIndex[\"default\"])(active - 1, length));\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.DOWN_KEY, function () {\n        return moveToOption((0, _getNewIndex[\"default\"])(active + 1, length));\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.HOME_KEY, function () {\n        return moveToOption(0);\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.END_KEY, function () {\n        return moveToOption(length - 1);\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.ENTER_KEY, function () {\n        return list[active] && handleCountryChange(list[active]);\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.ESCAPE_KEY, function () {\n        return setFocusIndex(0);\n      }), (0, _defineProperty2[\"default\"])(_keyHandlerMap, _constants.TAB_KEY, function () {\n        return setFocusIndex(2);\n      }), _keyHandlerMap);\n      keyHandlerMap[event.keyCode]();\n    }\n  }, [handleCountryChange, length, list, moveToOption, setFocusIndex]);\n  (0, _react.useEffect)(function () {\n    var element = ref.current || window;\n    element.addEventListener('keydown', handleKeyDown);\n    return function () {\n      element.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleKeyDown, ref]);\n  (0, _react.useEffect)(function () {\n    handleActiveChange(0);\n\n    if (scrollableRef.current && scrollableRef.current.scrollTo) {\n      scrollableRef.current.scrollTo(0, 0);\n    }\n\n    activeIndex.current = 0;\n  }, [country, handleActiveChange, itemsRef, length, scrollableRef]);\n  (0, _react.useEffect)(function () {\n    var currentItem = itemsRef.current[activeIndex.current];\n\n    if (currentItem) {\n      currentItem.setAttribute('aria-selected', true);\n    }\n  });\n  return handleActiveChange;\n}"]},"metadata":{},"sourceType":"script"}